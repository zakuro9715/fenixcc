setup:
  command: |
    rustup component add rustfmt
    rustup component add clippy

build:
  exec: cargo build

run:
  exec: cargo run --

compile-example:
  command: |
    mkdir -p ./tmp
    cargo run "./examples/$1" > "./tmp/$1.s"
    clang "./tmp/$1.s"

lint:
  exec: cargo clippy

clean:
  exec: cargo clean

rust-test:
  exec: cargo test

shell-test:
  script: ./shell-tests/run

test:
  command: |
    robo -c {{ .robo.file }} rust-test $@
    robo -c {{ .robo.file }} shell-test $@
