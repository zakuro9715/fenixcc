setup:
  command: |
    rustup component add rustfmt
    rustup component add clippy
    cargo install grcov

cargo:
  command: cargo $@

build:
  command: cargo build $@

run:
  command: cargo run

compile-example:
  command: |
    mkdir -p ./tmp/
    cargo run "./examples/$1" > "./tmp/$1.s"
    clang "./tmp/$1.s" -o "./tmp/a.out"

lint:
  exec: cargo clippy

clean:
  exec: cargo clean

rust-test:
  exec: cargo test

shell-test:
  script: ./shell-tests/run

test:
  command: |
    robo rust-test
    robo shell-test
